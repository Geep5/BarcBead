<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Barc - Decentralized Chat</title>
  <link rel="stylesheet" href="dashboard-nav.css">
</head>
<body>
  <div id="app">
    <!-- Setup overlay (shown first time) -->
    <div id="setup-overlay" class="overlay hidden">
      <div class="setup-content">
        <div class="logo">
          <span class="logo-icon">&#9673;</span>
          <span class="logo-text">Barc</span>
        </div>
        <h2>Welcome to Barc</h2>
        <p>Chat with others viewing the same pages</p>

        <div class="setup-options">
          <button id="generate-key-btn" class="btn primary full-width">Generate New Identity</button>
          <div class="divider"><span>or</span></div>
          <div class="input-group">
            <label for="import-key-input">Import existing key (nsec or hex)</label>
            <input type="password" id="import-key-input" placeholder="nsec1... or hex private key">
          </div>
          <button id="import-key-btn" class="btn full-width">Import Key</button>
        </div>

        <p class="small">Powered by Nostr - fully decentralized</p>
      </div>
    </div>

    <!-- Main layout with top navigation -->
    <div id="main-layout" class="hidden">
      <!-- Top Navigation Bar -->
      <nav id="top-nav">
        <div class="nav-left">
          <button class="nav-tab active" data-view="websites">
            <span class="tab-icon">ğŸŒ</span>
            <span class="tab-text">Websites</span>
          </button>
          <button class="nav-tab" data-view="profile">
            <span class="tab-icon">ğŸ‘¤</span>
            <span class="tab-text">Profile</span>
          </button>
        </div>
        <div class="nav-right">
          <div id="connection-status" class="connection-indicator disconnected">
            <span class="status-dot"></span>
            <span class="status-text">Disconnected</span>
          </div>
          <button id="settings-btn" class="btn icon" title="Settings">âš™ï¸</button>
        </div>
      </nav>

      <div id="content-area">
        <!-- Websites View -->
        <div id="websites-view" class="view-panel active">
          <aside class="sidebar">
            <div class="sidebar-section">
              <h3>Your Tabs</h3>
              <div id="tabs-list" class="tabs-list">
                <!-- Active tabs will be listed here -->
              </div>
            </div>

            <div class="sidebar-section">
              <h3>Pinned Channels</h3>
              <div id="pinned-list" class="tabs-list">
                <!-- Pinned channels will be listed here -->
              </div>
            </div>

            <div class="sidebar-section">
              <h3>Global Activity</h3>
              <div id="activity-list" class="tabs-list">
                <!-- Global activity will be listed here -->
              </div>
            </div>
          </aside>

          <main class="chat-area">
            <div id="no-selection" class="empty-state">
              <div class="empty-icon">ğŸ’¬</div>
              <h2>Select a website to start chatting</h2>
              <p>Choose a tab from the sidebar to see who else is viewing that page</p>
            </div>

            <div id="chat-container" class="hidden">
              <div class="chat-header">
                <div class="chat-info">
                  <div id="chat-title" class="chat-title">Page Title</div>
                  <div id="chat-url" class="chat-url">https://example.com</div>
                </div>
                <div class="chat-actions">
                  <button id="pin-btn" class="btn icon pin-btn" title="Pin channel">ğŸ“Œ</button>
                  <div class="chat-users">
                    <span id="user-count">0</span> people here
                  </div>
                </div>
              </div>

              <div class="users-bar">
                <span class="users-label">Here now:</span>
                <div id="users-list" class="users-list">
                  <span class="no-users">Just you</span>
                </div>
              </div>

              <div id="messages" class="messages">
                <!-- Messages will appear here -->
              </div>

              <div class="input-area">
                <div class="input-wrapper">
                  <input type="text" id="message-input" placeholder="Type a message... (@ to mention)">
                  <button id="emoji-btn" class="btn icon emoji-btn" title="Add emoji">ğŸ˜Š</button>
                  <!-- @mention autocomplete -->
                  <div id="mention-picker" class="mention-picker hidden">
                    <div id="mention-list" class="mention-list">
                      <!-- Matching users will appear here -->
                    </div>
                  </div>
                </div>
                <button id="send-btn" class="btn primary icon">
                  <span>â¤</span>
                </button>
              </div>
            </div>
          </main>
        </div>

        <!-- Profile View -->
        <div id="profile-view" class="view-panel hidden">
          <div class="profile-container">
            <div class="profile-header">
              <div class="profile-info">
                <div class="profile-avatar" id="my-profile-avatar">ğŸ‘¤</div>
                <div class="profile-details">
                  <input type="text" id="profile-name-input" class="profile-name-input" placeholder="Enter your name">
                  <div id="my-profile-pubkey" class="profile-pubkey">Loading...</div>
                </div>
              </div>
              <button id="save-profile-btn" class="btn primary">Save Profile</button>
            </div>

            <div class="profile-sections">
              <div class="profile-section">
                <h3>Following <span id="following-count" class="count-badge">0</span></h3>
                <div id="following-list" class="user-list">
                  <!-- Following list will appear here -->
                </div>
              </div>

              <div class="profile-section">
                <h3>Find User</h3>
                <div class="profile-search">
                  <input type="text" id="profile-search-input" placeholder="npub1... or hex pubkey">
                  <button id="profile-search-btn" class="btn primary">Search</button>
                </div>
              </div>

              <div class="profile-section">
                <h3>Your Feed</h3>
                <div id="my-feed" class="feed">
                  <!-- Your posts and mentions will appear here -->
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Settings modal -->
    <div id="settings-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="close-settings" class="btn icon">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <label>Your Public Key</label>
            <input type="text" id="pubkey-display" readonly>
          </div>
          <div class="input-group">
            <label>Your Private Key (Keep Secret!)</label>
            <input type="password" id="privkey-display" readonly>
            <button id="show-privkey-btn" class="btn small">Show</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Emoji picker -->
    <div id="emoji-picker" class="emoji-picker hidden">
      <div class="emoji-grid">
        <span class="emoji" data-emoji="ğŸ˜€">ğŸ˜€</span>
        <span class="emoji" data-emoji="ğŸ˜‚">ğŸ˜‚</span>
        <span class="emoji" data-emoji="ğŸ˜Š">ğŸ˜Š</span>
        <span class="emoji" data-emoji="ğŸ˜">ğŸ˜</span>
        <span class="emoji" data-emoji="ğŸ¥°">ğŸ¥°</span>
        <span class="emoji" data-emoji="ğŸ˜">ğŸ˜</span>
        <span class="emoji" data-emoji="ğŸ¤”">ğŸ¤”</span>
        <span class="emoji" data-emoji="ğŸ‘">ğŸ‘</span>
        <span class="emoji" data-emoji="â¤ï¸">â¤ï¸</span>
        <span class="emoji" data-emoji="ğŸ”¥">ğŸ”¥</span>
        <span class="emoji" data-emoji="ğŸ‰">ğŸ‰</span>
        <span class="emoji" data-emoji="ğŸ’¯">ğŸ’¯</span>
      </div>
    </div>
  </div>

  <script src="dashboard-nav.js"></script>
</body>
</html>